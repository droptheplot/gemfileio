(function() {
  'use strict';

  angular
    .module('gemfileio', ['satellizer', 'templates', 'ngRoute', 'ngResource', 'angular-loading-bar', 'ngDialog']);

  angular
    .module('gemfileio')
    .config(config);

  config.$inject = ['$routeProvider', '$locationProvider', '$authProvider', 'ngDialogProvider'];

  function config($routeProvider, $locationProvider, $authProvider, ngDialogProvider) {
    $routeProvider
      .when('/', {
        controller: 'projectsIndexController',
        templateUrl: "<%= asset_path('templates/projects/index.html') %>"
      })
      .when('/categories/:category_id', {
        controller: 'projectsIndexController',
        templateUrl: "<%= asset_path('templates/projects/index.html') %>"
      })
      .when('/projects/new', {
        controller: 'projectsNewController',
        templateUrl: "<%= asset_path('templates/projects/new.html') %>"
      });

    $locationProvider.html5Mode(true);

    ngDialogProvider.setDefaults({
      closeByDocument: true,
      closeByEscape: true,
      showClose: false,
      disableAnimation: true
    });

    $authProvider.signupUrl = '/api/v1/users/signup';
    $authProvider.loginUrl = '/api/v1/users/login';

    $authProvider.github({
      clientId: '<%= Rails.application.secrets.github_client_id %>',
      url: 'http://localhost:3000/api/v1/users/oauth/github'
    });
  };
})()
